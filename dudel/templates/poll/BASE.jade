extends BASE.jade

block title
    | #{poll.title} - #{super()}

block header
    header.poll
        .container
            .poll-data
                .poll-title
                    h1= poll.title
                        small
                            block polltitl

                    include poll/_properties.jade

                .poll-actions
                    block actions


            nav: ul.poll-tabs
                li(class=("active" if request.endpoint in ("poll_overview",) else ""))
                    a(href=poll.get_url(), data-shortcut="g o")
                        i.fa.fa-table
                        span= _("Overview")

                li(class=("active" if request.endpoint in ("poll_activity",) else ""))
                    a(href=url_for('poll_activity', slug=poll.slug), data-shortcut="g a")
                        i.fa.fa-heartbeat
                        span= _("Activity")

                        - set comment_count = poll.comments.count()
                        - if comment_count
                            div.badge
                                i.fa.fa-comments
                                span= comment_count

                - if poll.user_can_edit(current_user)
                    li(class=("active" if request.endpoint in ("poll_edit", "poll_edit_values") else ""))
                        a(href=url_for('poll_edit', slug=poll.slug), data-shortcut="g s")
                            i.fa.fa-wrench
                            span= _("Settings")

                    - if current_user.is_authenticated()
                        li(class=("active" if request.endpoint in ("poll_invitations",) else ""))
                            a(href=url_for('poll_invitations', slug=poll.slug), data-shortcut="g i")
                                i.fa.fa-envelope
                                span= _("Invitations")

                    li(class=("active" if request.endpoint in ("poll_edit_choices",) else ""))
                        a(href=url_for('poll_edit_choices', slug=poll.slug), data-shortcut="g c")
                            i.fa.fa-list
                            span= _("Choices")

                li(class=("vote " + ("active" if request.endpoint in ("poll_vote", "poll_vote_edit") else "")))
                    a(href=url_for('poll_vote', slug=poll.slug), data-shortcut="g v")
                        i.fa.fa-check
                        span= _("Vote")

